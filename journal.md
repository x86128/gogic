# Простой симулятор цифровых логических схем

Хотелось бы запилить два режима:
1. симулятор-интерпретатор в котором в условной функции `main` написан конструирующий код и ниже условный `run` который выполняет симуляцию и завершается когда кончилось время симуляции либо схема пришла к неизменному состоянию.
2. простой генератор из сконструированной модели на шаге 1) в код который можно скомпилировать и запустить подобно `verilator` (для языка `Go`, например)

Пока вот удалось найти какие-то древние книги по общим принципам *event-driven* симуляции (но там больше про аналоговые модельки), одну читаю пробую изготовить по ней симулятор

Пока придумал такой метод:

Схема состоит из проводов `wire` которые соединяют между собой логические элементы `gate`. На начальном шаге все уровни `wire` и `gate` в логическом 0 (false). Схему возбуждаем неким входным вектором, который формирует список `wire` состояния которых изменились.

На i-том шаге симуляции выбираем список проводов состояние которых изменилось на противоположное, по этому списку добавляем соответствующий `gate` в очередь обсчета `gate` на следующий шаг симуляции. Далее для всех `gate` считаем выходное состояние и если оно изменилось то добавляем соотв. `wire` на шаг i+1.

Каждый `wire` имеет список `gate` к которым он подключен, каждый `gate` знает к какому `wire` подключен его выход.

`wire` не имеющий подключенных элементов считается выходным.